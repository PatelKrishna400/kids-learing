<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puzzle Map India - WonderKids</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary: #ff9f43;
            --success: #2ecc71;
            --bg: #f5f6fa;
            --map-empty: #dcdde1;
            --text: #2f3640;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Fredoka', sans-serif;
            user-select: none;
        }

        body {
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            background: var(--bg);
            display: flex;
            flex-direction: column;
        }

        header {
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            z-index: 100;
        }

        .back-btn {
            background: #fff;
            border: 2px solid #eee;
            color: #ff4d4d;
            padding: 10px 20px;
            border-radius: 15px;
            text-decoration: none;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .game-title {
            font-size: 1.8rem;
            color: var(--text);
            font-weight: 700;
        }

        .game-stats {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .stat-badge {
            background: var(--primary);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Game Scene */
        main {
            flex: 1;
            display: flex;
            padding: 20px;
            gap: 40px;
            align-items: center;
            justify-content: center;
        }

        /* Side Tray for Pieces */
        .pieces-tray {
            width: 250px;
            height: 80%;
            background: white;
            border-radius: 30px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
            border: 4px solid #f1f2f6;
        }

        .piece-item {
            background: #f1f2f6;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            cursor: grab;
            font-weight: 700;
            color: var(--text);
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .piece-item:hover {
            transform: scale(1.05);
            background: white;
            border-color: var(--primary);
        }

        .piece-item.placed {
            opacity: 0.3;
            pointer-events: none;
        }

        /* Map Area */
        .map-container {
            flex: 1;
            max-width: 800px;
            height: 90%;
            background: white;
            border-radius: 40px;
            position: relative;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
            overflow: hidden;
        }

        #india-map {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .state-slot {
            position: absolute;
            fill: var(--map-empty);
            stroke: white;
            stroke-width: 2;
            transition: fill 0.3s;
        }

        .state-slot.active {
            fill: #e1e9ff;
            stroke: var(--primary);
        }

        .state-slot.filled {
            fill: var(--success);
        }

        /* Drag and Drop Elements */
        .draggable-state {
            position: absolute;
            cursor: grab;
            z-index: 1000;
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.2));
            pointer-events: auto;
        }

        .draggable-state.dragging {
            cursor: grabbing;
            transform: scale(1.1);
            transition: none;
        }

        /* Label on map */
        .state-label {
            position: absolute;
            font-size: 0.7rem;
            font-weight: 700;
            color: white;
            pointer-events: none;
            text-align: center;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
            display: none;
        }

        .state-label.visible {
            display: block;
        }

        /* Overlays */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            backdrop-filter: blur(10px);
        }

        .overlay.active {
            display: flex;
        }

        .modal {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .btn-next {
            background: #27ae60;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 30px;
        }

        /* Simplified SVG Styles */
        .map-base {
            fill: #f8f9fa;
            stroke: #ccc;
            stroke-width: 1;
        }
    </style>
</head>

<body>

    <header>
        <a href="index.html" class="back-btn"><i class="fa-solid fa-arrow-left"></i> Home</a>
        <h1 class="game-title">Puzzle Map India</h1>
        <div class="game-stats">
            <div class="stat-badge"><i class="fa-solid fa-map-marked-alt"></i> <span id="progress">0 / 10</span> States
            </div>
            <div class="stat-badge" style="background: #2ecc71;"><i class="fa-solid fa-star"></i> <span
                    id="stars">0</span></div>
        </div>
    </header>

    <main>
        <div class="pieces-tray" id="pieces-tray">
            <!-- State pieces list here -->
        </div>

        <div class="map-container" id="map-area">
            <svg id="india-svg" viewBox="0 0 600 700" style="width: 100%; height: 100%;">
                <!-- Base India Outline -->
                <path
                    d="M285,50 L320,80 L340,120 L380,140 L400,180 L420,220 L450,230 L480,250 L500,280 L520,320 L500,350 L480,380 L450,400 L420,450 L380,500 L350,550 L320,600 L300,650 L280,680 L260,650 L240,600 L210,550 L180,500 L150,450 L120,400 L100,350 L80,300 L90,250 L120,200 L150,150 L180,120 L220,100 L250,80 Z"
                    class="map-base" />

                <!-- State Drop Zones -->
                <g id="drop-zones">
                    <!-- Placeholder simplified paths for 10 major states -->
                    <path id="zone-RJ" d="M150,180 L230,180 L230,280 L140,280 Z" class="state-slot"
                        data-name="Rajasthan" />
                    <path id="zone-MH" d="M160,380 L260,380 L260,480 L160,480 Z" class="state-slot"
                        data-name="Maharashtra" />
                    <path id="zone-UP" d="M250,180 L350,180 L350,260 L250,260 Z" class="state-slot"
                        data-name="Uttar Pradesh" />
                    <path id="zone-MP" d="M220,280 L320,280 L320,380 L220,380 Z" class="state-slot"
                        data-name="Madhya Pradesh" />
                    <path id="zone-GJ" d="M100,280 L180,280 L180,360 L100,360 Z" class="state-slot"
                        data-name="Gujarat" />
                    <path id="zone-KA" d="M180,480 L250,480 L250,580 L180,580 Z" class="state-slot"
                        data-name="Karnataka" />
                    <path id="zone-TN" d="M240,560 L310,560 L310,660 L240,660 Z" class="state-slot"
                        data-name="Tamil Nadu" />
                    <path id="zone-KL" d="M200,580 L240,580 L240,680 L200,680 Z" class="state-slot"
                        data-name="Kerala" />
                    <path id="zone-WB" d="M400,280 L460,280 L460,380 L400,380 Z" class="state-slot"
                        data-name="West Bengal" />
                    <path id="zone-PB" d="M200,120 L260,120 L260,170 L200,170 Z" class="state-slot"
                        data-name="Punjab" />
                </g>

                <!-- State Labels -->
                <text x="180" y="240" class="state-label" id="label-RJ">Rajasthan</text>
                <text x="200" y="440" class="state-label" id="label-MH">Maharashtra</text>
                <text x="290" y="230" class="state-label" id="label-UP">Uttar Pradesh</text>
                <text x="260" y="340" class="state-label" id="label-MP">Madhya Pradesh</text>
                <text x="130" y="330" class="state-label" id="label-GJ">Gujarat</text>
                <text x="210" y="540" class="state-label" id="label-KA">Karnataka</text>
                <text x="270" y="620" class="state-label" id="label-TN">Tamil Nadu</text>
                <text x="215" y="640" class="state-label" id="label-KL">Kerala</text>
                <text x="425" y="340" class="state-label" id="label-WB">West Bengal</text>
                <text x="225" y="150" class="state-label" id="label-PB">Punjab</text>
            </svg>
        </div>
    </main>

    <div class="overlay" id="winOverlay">
        <div class="modal">
            <div style="font-size: 5rem; margin-bottom: 20px;">ðŸ‡®ðŸ‡³</div>
            <h2>Jai Hind!</h2>
            <p>You completed the Great Map of India!</p>
            <button class="btn-next" onclick="location.reload()">Explore More</button>
        </div>
    </div>

    <script>
        const stateData = [
            { id: 'RJ', name: 'Rajasthan' },
            { id: 'MH', name: 'Maharashtra' },
            { id: 'UP', name: 'Uttar Pradesh' },
            { id: 'MP', name: 'Madhya Pradesh' },
            { id: 'GJ', name: 'Gujarat' },
            { id: 'KA', name: 'Karnataka' },
            { id: 'TN', name: 'Tamil Nadu' },
            { id: 'KL', name: 'Kerala' },
            { id: 'WB', name: 'West Bengal' },
            { id: 'PB', name: 'Punjab' }
        ];

        let placedStates = 0;
        let score = 0;
        let currentDragged = null;
        let offset = { x: 0, y: 0 };

        function initLevel() {
            const tray = document.getElementById('pieces-tray');
            const shuffled = [...stateData].sort(() => Math.random() - 0.5);

            shuffled.forEach(state => {
                const item = document.createElement('div');
                item.className = 'piece-item';
                item.innerText = state.name;
                item.draggable = true;
                item.dataset.id = state.id;

                item.addEventListener('dragstart', handleDragStart);
                tray.appendChild(item);
            });
        }

        function handleDragStart(e) {
            currentDragged = e.target;
            e.dataTransfer.setData('text/plain', e.target.dataset.id);
            speak(e.target.innerText);
        }

        // Drop Zone Logic
        const dropZones = document.querySelectorAll('.state-slot');
        dropZones.forEach(zone => {
            zone.addEventListener('dragover', (e) => {
                e.preventDefault();
                if (!zone.classList.contains('filled')) zone.classList.add('active');
            });
            zone.addEventListener('dragleave', () => {
                zone.classList.remove('active');
            });
            zone.addEventListener('drop', (e) => {
                e.preventDefault();
                zone.classList.remove('active');
                const stateId = e.dataTransfer.getData('text');

                if (zone.id === `zone-${stateId}`) {
                    snapToZone(zone, stateId);
                } else {
                    speak("Try again!");
                }
            });
        });

        function snapToZone(zone, id) {
            zone.classList.add('filled');
            document.getElementById(`label-${id}`).classList.add('visible');

            // Mark item as placed
            const item = Array.from(document.querySelectorAll('.piece-item')).find(p => p.dataset.id === id);
            item.classList.add('placed');

            placedStates++;
            score += 100;
            document.getElementById('progress').innerText = `${placedStates} / 10`;
            document.getElementById('stars').innerText = score;

            confetti({ particleCount: 50, spread: 30, origin: { y: 0.8 } });
            speak("Wonderful! That's " + zone.dataset.name);

            if (placedStates === stateData.length) {
                setTimeout(showWin, 1000);
            }
        }

        function speak(text) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.rate = 1.0;
            window.speechSynthesis.speak(utterance);
        }

        function showWin() {
            confetti({ particleCount: 200, spread: 70, origin: { y: 0.6 } });
            document.getElementById('winOverlay').classList.add('active');
        }

        initLevel();
    </script>
</body>

</html>